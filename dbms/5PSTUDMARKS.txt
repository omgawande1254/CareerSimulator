sqlplus system/password@XE


SET SERVEROUTPUT ON;


-- Step 1: Create tables
CREATE TABLE Stud_Marks (
    Roll NUMBER(5) PRIMARY KEY,
    Name VARCHAR2(50),
    Total_Marks NUMBER(5)
);

CREATE TABLE Result (
    Roll NUMBER(5),
    Name VARCHAR2(50),
    Class VARCHAR2(30)
);

-- Step 2: Insert sample data
INSERT INTO Stud_Marks VALUES (1, 'Om Gawande', 1200);
INSERT INTO Stud_Marks VALUES (2, 'Raj Mehta', 950);
INSERT INTO Stud_Marks VALUES (3, 'Neha Sharma', 870);
INSERT INTO Stud_Marks VALUES (4, 'Aditi Patil', 820);
INSERT INTO Stud_Marks VALUES (5, 'Vikas Rao', 760);
COMMIT;

-- Step 3: Create stored procedure
CREATE OR REPLACE PROCEDURE proc_Grade IS
    v_roll Stud_Marks.Roll%TYPE;
    v_name Stud_Marks.Name%TYPE;
    v_marks Stud_Marks.Total_Marks%TYPE;
    v_class VARCHAR2(30);
    
    CURSOR cur_stud IS
        SELECT Roll, Name, Total_Marks FROM Stud_Marks;
BEGIN
    FOR rec IN cur_stud LOOP
        v_roll := rec.Roll;
        v_name := rec.Name;
        v_marks := rec.Total_Marks;

        IF v_marks BETWEEN 990 AND 1500 THEN
            v_class := 'Distinction';
        ELSIF v_marks BETWEEN 900 AND 989 THEN
            v_class := 'First Class';
        ELSIF v_marks BETWEEN 825 AND 899 THEN
            v_class := 'Higher Second Class';
        ELSE
            v_class := 'Fail';
        END IF;

        INSERT INTO Result (Roll, Name, Class)
        VALUES (v_roll, v_name, v_class);
    END LOOP;

    COMMIT;
    DBMS_OUTPUT.PUT_LINE('Results processed successfully.');
END;
/


BEGIN
    proc_Grade;
END;
/


SELECT * FROM Result;
